services:
  - type: web
    name: ecfobooks
    runtime: ruby
    plan: starter
    repo: https://github.com/curielmc/qbo-reports
    branch: master
    buildCommand: |
      gem install bundler
      bundle lock --add-platform x86_64-linux
      bundle config set --local without 'development test'
      bundle install
      RAILS_ENV=production SECRET_KEY_BASE=dummy DATABASE_URL=nulldb:// bundle exec rake assets:precompile || echo "Asset precompile skipped"
    startCommand: bundle exec puma -C config/puma.rb
    envVars:
      - key: DATABASE_URL
        value: postgresql://ecfobooks:mmVulK0rYKmqeSn3EEA953F4VMeiHHRC@dpg-d5vsdpd6ubrc73cqrsm0-a.oregon-postgres.render.com/ecfobooks_production
      - key: RAILS_MASTER_KEY
        value: 27df8db82cab9b206e5fe2ced05d4ad3
      - key: RAILS_ENV
        value: production
      - key: RAILS_LOG_TO_STDOUT
        value: "true"
